function y = cdmamod(msg)
msg1=[];
msg2=[];
msg3=[];
msg4=[];
msg5=[];
msg6=[];
msg7=[];
msg8=[];

for i=1:1:length(msg)/8
    msg1(i)=msg(i*8-7);
    msg2(i)=msg(i*8-6);
    msg3(i)=msg(i*8-5);
    msg4(i)=msg(i*8-4);
    msg5(i)=msg(i*8-3);
    msg6(i)=msg(i*8-2);
    msg7(i)=msg(i*8-1);
    msg8(i)=msg(i*8);
end

C81=[];
C82=[];
C83=[];
C84=[];
C85=[];
C86=[];
C87=[];
C88=[];

for i=1:1:length(msg)/8
    if msg1(i)==1 % 1 1 1 1 1 1 1 1
        C81(i*8-7)=1;
        C81(i*8-6)=1;
        C81(i*8-5)=1;
        C81(i*8-4)=1;
        C81(i*8-3)=1;
        C81(i*8-2)=1;
        C81(i*8-1)=1;
        C81(i*8)=1;
    else % -1 -1 -1 -1 -1 -1 -1 -1 
        C81(i*8-7)=-1;
        C81(i*8-6)=-1;
        C81(i*8-5)=-1;
        C81(i*8-4)=-1;
        C81(i*8-3)=-1;
        C81(i*8-2)=-1;
        C81(i*8-1)=-1;
        C81(i*8)=-1;
    end
    if msg2(i)==1 % 1 1 1 1 -1 -1 -1 -1
        C82(i*8-7)=1;
        C82(i*8-6)=1;
        C82(i*8-5)=1;
        C82(i*8-4)=1;
        C82(i*8-3)=-1;
        C82(i*8-2)=-1;
        C82(i*8-1)=-1;
        C82(i*8)=-1;
    else % -1 -1 -1 -1 1 1 1 1 
        C82(i*8-7)=-1;
        C82(i*8-6)=-1;
        C82(i*8-5)=-1;
        C82(i*8-4)=-1;
        C82(i*8-3)=1;
        C82(i*8-2)=1;
        C82(i*8-1)=1;
        C82(i*8)=1;
    end
    if msg3(i)==1 % 1 1 -1 -1 1 1 -1 -1 
        C83(i*8-7)=1;
        C83(i*8-6)=1;
        C83(i*8-5)=-1;
        C83(i*8-4)=-1;
        C83(i*8-3)=1;
        C83(i*8-2)=1;
        C83(i*8-1)=-1;
        C83(i*8)=-1;
    else % -1 -1 1 1 -1 -1 1 1
        C83(i*8-7)=-1;
        C83(i*8-6)=-1;
        C83(i*8-5)=1;
        C83(i*8-4)=1;
        C83(i*8-3)=-1;
        C83(i*8-2)=-1;
        C83(i*8-1)=1;
        C83(i*8)=1;
    end
    if msg4(i)==1 % 1 1 -1 -1 -1 -1 1 1
        C84(i*8-7)=1;
        C84(i*8-6)=1;
        C84(i*8-5)=-1;
        C84(i*8-4)=-1;
        C84(i*8-3)=-1;
        C84(i*8-2)=-1;
        C84(i*8-1)=1;
        C84(i*8)=1;
    else % -1 -1 1 1 1 1 -1 -1
        C84(i*8-7)=-1;
        C84(i*8-6)=-1;
        C84(i*8-5)=1;
        C84(i*8-4)=1;
        C84(i*8-3)=1;
        C84(i*8-2)=1;
        C84(i*8-1)=-1;
        C84(i*8)=-1;
    end
    if msg5(i)==1 % 1 -1 1 -1 1 -1 1 -1
        C85(i*8-7)=1;
        C85(i*8-6)=-1;
        C85(i*8-5)=1;
        C85(i*8-4)=-1;
        C85(i*8-3)=1;
        C85(i*8-2)=-1;
        C85(i*8-1)=1;
        C85(i*8)=-1;
    else % -1 1 -1 1 -1 1 -1 1
        C85(i*8-7)=-1;
        C85(i*8-6)=1;
        C85(i*8-5)=-1;
        C85(i*8-4)=1;
        C85(i*8-3)=-1;
        C85(i*8-2)=1;
        C85(i*8-1)=-1;
        C85(i*8)=1;
    end
    if msg6(i)==1 % 1 -1 1 -1 -1 1 -1 1
        C86(i*8-7)=1;
        C86(i*8-6)=-1;
        C86(i*8-5)=1;
        C86(i*8-4)=-1;
        C86(i*8-3)=-1;
        C86(i*8-2)=1;
        C86(i*8-1)=-1;
        C86(i*8)=1;
    else % -1 1 -1 1 1 -1 1 -1
        C86(i*8-7)=-1;
        C86(i*8-6)=1;
        C86(i*8-5)=-1;
        C86(i*8-4)=1;
        C86(i*8-3)=1;
        C86(i*8-2)=-1;
        C86(i*8-1)=1;
        C86(i*8)=-1;
    end
    if msg7(i)==1 % 1 -1 -1 1 1 -1 -1 1
        C87(i*8-7)=1;
        C87(i*8-6)=-1;
        C87(i*8-5)=-1;
        C87(i*8-4)=1;
        C87(i*8-3)=1;
        C87(i*8-2)=-1;
        C87(i*8-1)=-1;
        C87(i*8)=1;
    else % -1 1 1 -1 -1 1 1 -1
        C87(i*8-7)=-1;
        C87(i*8-6)=1;
        C87(i*8-5)=1;
        C87(i*8-4)=-1;
        C87(i*8-3)=-1;
        C87(i*8-2)=1;
        C87(i*8-1)=1;
        C87(i*8)=-1;
    end
    if msg8(i)==1 % 1 -1 -1 1 -1 1 1 -1
        C88(i*8-7)=1;
        C88(i*8-6)=-1;
        C88(i*8-5)=-1;
        C88(i*8-4)=1;
        C88(i*8-3)=-1;
        C88(i*8-2)=1;
        C88(i*8-1)=1;
        C88(i*8)=-1;
    else % -1 1 1 -1 1 -1 -1 1
        C88(i*8-7)=-1;
        C88(i*8-6)=1;
        C88(i*8-5)=1;
        C88(i*8-4)=-1;
        C88(i*8-3)=1;
        C88(i*8-2)=-1;
        C88(i*8-1)=-1;
        C88(i*8)=1;
    end
end

y=C81+C82+C83+C84+C85+C86+C87+C88;



